webpackJsonp([8],{"2mTW":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=e.contactCount,n=e.isInContactRequestsView,a=e.onClick;if(!t&&!n)return null;var r=void 0;return r=t>X?L.a._("1000+ contact requests","messaging"):t>=Y&&t<=X?L.a._("100+ contact requests","messaging"):B.h(L.a.ngettext("{{ contactCount }} contact request","{{ contactCount }} contact requests",t),{contactCount:""+t}),R.a.createElement("div",{className:"Module ContactRequestsCount"},R.a.createElement(G.a,{className:z()({contactRequestView:n},"isBrioFlat","contactRequestsCount","btn"),hasIcon:n,hasText:!0,onClick:a,text:r,type:"borderless"}))}function s(e){var t=e.contactRequests,n=e.handleCancelViewContactRequests;return t?R.a.createElement("div",{className:"Module ContactRequestsCount"},R.a.createElement(K,{contactCount:t.length,isInContactRequestsView:!0,onClick:n}),R.a.createElement(H.b,{padding:2},R.a.createElement(H.F,{size:"sm"},L.a._("These messages appear from people outside of your networks.","contact requests disclaimer"))),t.map(function(e,t){return R.a.createElement("div",{key:e.id},0!==t?Z:null,R.a.createElement(U,e))})):null}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(e){var t=e.contactItem,n=e.currentUserID,a=e.conversationItem,r=e.handleContactWrapperClick,o=e.isSelected,i=e.isUser,s=["selectionIndicator","contactCircleRep","selectionIndicator"];return R.a.createElement("a",{className:"conversationContactContainer",key:a.id,onClick:function e(){return r(i,t)},onKeyDown:function e(){},role:"button",tabIndex:0},me(n,a),o?R.a.createElement("div",{className:s.join(" ")},he):null)}function d(e){var t=e.tokenizedItems;return R.a.createElement("div",{className:"reactTokenizedInputContainer",style:{zIndex:1e3}},R.a.createElement("div",{className:"tokenContainer"},t.map(function(e,t){return R.a.createElement("div",{className:"tokenItem",key:t},e.full_name?R.a.createElement(J.a,{size:"small",users:[e]}):R.a.createElement(J.a,{emails:[e],size:"small"}))})),be)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e){var t=e.boardInvites;return t?R.a.createElement("div",null,t.map(function(e){return R.a.createElement(Ie,{boardInviteItem:e,key:e.id})})):null}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var j=n("OVW8"),R=n.n(j),D=n("DUIN"),B=n("5tOk"),L=n("W/Cr"),M=n("IaRT"),W=n.n(M),A=n("ZtCB"),V=n.n(A),H=n("gEaE"),U=function(e){function t(){var n,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={contactRequestCompleted:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},o.handleInviteAcceptResponse=function(){o.setState({isAcceptButtonLoading:!0,isIgnoreButtonLoading:!1}),V.a.create("ContactRequestAcceptResource",{contact_request:o.props}).callUpdate().then(function(){o.setState({contactRequestCompleted:!0,isAcceptButtonLoading:!1})})},o.handleInviteDeclineResponse=function(){o.setState({isAcceptButtonLoading:!1,isIgnoreButtonLoading:!0}),V.a.create("ContactRequestIgnoreResource",{contact_request:o.props}).callDelete().then(function(){o.setState({contactRequestCompleted:!0,isIgnoreButtonLoading:!1})})},i=n,r(o,i)}return o(t,e),t.prototype.renderRequestText=function e(t,n,a){if(t){var r=t.name,o=t.url;return B.h(L.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> invited you to collaborate on <a href="{{ boardUrl }}">{{ boardName }}</a>'),{boardName:r,boardUrl:o,senderName:n,senderUsername:a})}return B.h(L.a._('<a href="/{{ senderUsername }}/">{{ senderName }}</a> wants to send a message to you'),{senderName:n,senderUsername:a})},t.prototype.render=function e(){var t=this.state,n=t.contactRequestCompleted,a=t.isAcceptButtonLoading,r=t.isIgnoreButtonLoading;if(n)return null;var o=this.props,i=o.board,s=o.sender,c=s.image_large_url,l=s.full_name,u=s.username;return R.a.createElement(H.b,{paddingX:2,paddingY:4,xs:{display:"flex"}},R.a.createElement(H.b,{height:50,width:50,shrink:!0},R.a.createElement(H.r,{href:"/"+u+"/"},R.a.createElement(H.a,{name:u,src:c}))),R.a.createElement(H.b,{paddingX:3},R.a.createElement(H.b,{marginBottom:3},R.a.createElement(H.F,null,R.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.renderRequestText(i,l,u)}}))),R.a.createElement(H.b,{xs:{display:"flex"},marginLeft:-1,marginRight:-1},R.a.createElement(H.b,{paddingX:1,grow:!0},R.a.createElement(H.c,{disabled:r,onClick:this.handleInviteDeclineResponse,size:"sm",text:L.a._("Ignore","ignore contact request")})),R.a.createElement(H.b,{paddingX:1,grow:!0},R.a.createElement(H.c,{color:"red",disabled:a,onClick:this.handleInviteAcceptResponse,size:"sm",text:L.a._("Accept","accept contact request")})))))},t}(j.Component),F=n("GGB8"),z=n.n(F),G=n("nM9s"),q=n("Grh7"),Y=100,X=1e3,K=Object(q.a)({name:"ContactRequestsCountGetResource",key:"contactCount"},{allowStale:!1})(i),Z=R.a.createElement(H.h,null),Q=Object(q.a)({name:"ContactRequestsResource",key:"contactRequests"},{allowStale:!1})(s),J=n("NYeZ"),$=n("tmfO"),ee=n("Kqaz"),te=n("/S3G"),ne=n("MQ2h"),ae=n.n(ne),re=n("Vfgg"),oe=n("kzic"),ie=n("dCTv"),se=n("fvzG"),ce=50,le=R.a.createElement("span",{className:"conversationUnreadMark"}),ue=function(e){function t(){var n,a,r;c(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=l(this,e.call.apply(e,[this].concat(i))),a.state={isHidden:!1,unread:a.props.data.unread||0},a.handleHideConversation=function(e){e.stopPropagation();var t=a.props.data.id;V.a.create("ConversationResource",{conversation_id:t}).callDelete({showError:!1}),a.removeConversationChatHead(t),a.setState({isHidden:!0}),a.logConversationItemHide(t)},a.handleConversationItemClick=function(){var e=a.props.data;a.setState({unread:0}),e.board||a.showConversationChatHead(e),a.logConversationItemClick()},a.logConversationItemClick=function(){(0,a.props.contextLog)(101,{component:54,element:277})},a.logConversationItemHide=function(e){(0,a.props.contextLog)(182,{component:54,element:277,conversation_id:e})},r=n,l(a,r)}return u(t,e),t.prototype.showConversationChatHead=function e(t){var n=this.props.dispatch,a=t.id;n(Object(se.e)(a)),n(Object(se.d)(a)),n(te.a)},t.prototype.removeConversationChatHead=function e(t){var n=this.props.dispatch;n(Object(se.c)(t)),n(Object(se.a)(t))},t.prototype.renderConversationsTitleNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(e,t){return R.a.createElement($.b,{to:"/"+e.username+"/",key:t},e.first_name)}).concat(t.map(function(e,t){return R.a.createElement("span",{key:t},e)}));return R.a.createElement("div",{className:"membersTitleNames"},n.map(function(e,t){var a=L.a._(", ","comma separating conversation member names");return R.a.createElement("span",{key:t},e,t===n.length-1?"":R.a.createElement("span",null,a))}))},t.prototype.renderConversationsTitleView=function e(t,n,a,r){var o=this.props.viewerId,i=r.filter(function(e){return e.id!==o});return R.a.createElement("h1",{className:"conversationTitleContainer"},n||this.renderConversationsTitleNames(a,i))},t.prototype.renderLastMessage=function e(t){var n=t.board,a=t.created_at,r=t.pin,o=t.sender,i=t.text,s=t.user,c=i;if(!c){var l=o.first_name;r?c=B.h(L.a._("{{ senderName }} sent a Pin","messaging"),{senderName:l}):n?c=B.h(L.a._("{{ senderName }} sent a board","messaging"),{senderName:l}):s&&(c=B.h(L.a._("{{ senderName }} sent a user profile","messaging"),{senderName:l}))}return c=Object(re.b)(c||"",50),R.a.createElement("div",null,R.a.createElement("div",{className:"lastMessageContent"},c),R.a.createElement("div",{className:"lastMessageTimestamp"},L.a.getHumanizedTimesince(a)))},t.prototype.renderItemContent=function e(){var t=this.state.isHidden,n=this.props.data,a=n.board,r=n.emails,o=n.last_message,i=n.name,s=n.users,c=r||[];return R.a.createElement("div",{className:z()("ConversationListItemReact",{conversationHidden:t})},R.a.createElement("div",{className:"conversationRepContainer"},R.a.createElement(J.a,{board:a,emails:c,users:s})),R.a.createElement("div",{className:"conversationContentContainer"},this.renderConversationsTitleView(a,i,c,s),o?this.renderLastMessage(o):null),this.state.unread>0?le:null,R.a.createElement(G.a,{className:"conversationCloseButton",hasText:!0,onClick:this.handleHideConversation,text:L.a._("×","close button"),type:"borderless"}))},t.prototype.render=function e(){var t=this.props.data,n=t.board;return t.users.length?n?R.a.createElement($.b,{onClick:this.handleConversationItemClick,to:n.url},this.renderItemContent()):R.a.createElement("div",{onClick:this.handleConversationItemClick,role:"button"},this.renderItemContent()):null},t}(j.Component);ue.contextTypes={userAgent:W.a.shape({isMobile:W.a.bool.isRequired}).isRequired};var pe=function e(t){return{viewerId:t.viewer.id}},de=Object(ne.compose)(Object(D.connect)(pe),ee.a,Object(ie.a)(),oe.withRouter)(ue),me=function e(t,n){var a=n.emails,r=n.users,o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(t&&0!==t.length){var n=t[0];return R.a.createElement("div",{className:"contactWrapper"},R.a.createElement(J.a,{emails:[n],size:"small"}),R.a.createElement("div",{className:"contactTextInfo"},R.a.createElement("span",{className:"contactName"},n),R.a.createElement("span",{className:"contactDescription"},L.a._("Email friend","on selected contact list"))))}},i=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=n[0].id===t?n[1]:n[0],r=a.full_name;return R.a.createElement("div",{className:"contactWrapper"},R.a.createElement(J.a,{size:"small",users:[a]}),R.a.createElement("div",{className:"contactTextInfo"},R.a.createElement("span",{className:"contactName"},r),R.a.createElement("span",{className:"contactDescription"},L.a._("On Pinterest","info about a contact"))))};return R.a.createElement("div",null,a&&a.length>0?o(a):i(r))},he=R.a.createElement("em",null);p.defaultProps={isSelected:!1};var fe=n("tZWC"),ge=n("eXpm"),ve=n.n(ge),be=R.a.createElement("div",{className:"textFieldContainer"}),ye=8,Ee=2,Ce=function(e){function t(){var n,a,r;m(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=h(this,e.call.apply(e,[this].concat(i))),a.state={contactCounter:0,selectedEmails:{},selectedUsers:{},tokenizedItems:[],value:""},a.onHandleContactClick=function(e,t){var n=a.state,r=n.selectedEmails,o=n.selectedUsers,i=e?o:r,s=e?t.id:t,c=i[s];i[s]=!c,c?a.removeTokenItem(t):a.addTokenItem(t)},a.getSelectedEmails=function(){var e=a.state.selectedEmails;return Object.keys(e).filter(function(t){return e[t]})},a.getSelectedUsers=function(){var e=a.state.selectedUsers;return Object.keys(e).filter(function(t){return e[t]})},a.handleTypeaheadKeyDown=function(e){var t=a.state,n=t.contactCounter,r=t.selectedEmails,o=t.selectedUsers,i=t.tokenizedItems,s=t.value;if(e.keyCode===ye&&n&&!s){var c=i.pop(),l=!!c.id,u=c.id||c;(l?o:r)[u]=!1,a.setState({contactCounter:n-1,tokenizedItems:i})}},a.handleInviteItemClick=function(e,t){var n=a.state,r=n.selectedUsers,o=n.selectedEmails,i=e?r:o,s=t.id||t;i[s]||(i[s]=!0,a.addTokenItem(t))},a.handleSendMessage=function(){var e=a.getSelectedEmails(),t=a.getSelectedUsers(),n=a.props.dispatch;V.a.create("ConversationsResource",{user_ids:t,emails:e,text:null}).callCreate().then(function(e){var t=e&&e.resource_response.data.id;n(Object(se.e)(t)),n(Object(se.d)(t))})},a.addTokenItem=function(e){var t=a.state,n=t.contactCounter,r=t.tokenizedItems;a.setState({contactCounter:n+1,tokenizedItems:r.concat([e]),value:""})},a.removeTokenItem=function(e){var t=a.state,n=t.contactCounter,r=t.tokenizedItems;n-=1,e.id?(r=r.filter(function(t){return t.id!==e.id}),a.setState({contactCounter:n,tokenizedItems:r})):a.setState({contactCounter:n,tokenizedItems:(r||[]).filter(function(t){return t!==e})})},a.renderSendMessageButton=function(){return R.a.createElement(G.a,{className:z()("sendNewMessageButton"),hasText:!0,onClick:a.handleSendMessage,showText:!0,text:L.a._("Next","open the new chat"),type:"borderless"})},a.renderCancelMessageButton=function(){var e=a.props.handleCancelNewMessageClick;return R.a.createElement(G.a,{className:z()("cancelNewMessageView","cancelButton"),hasText:!0,onClick:e,showText:!0,text:L.a._("Cancel","cancel new message view"),type:"borderless"})},r=n,h(a,r)}return f(t,e),t.prototype.getContactItem=function e(t,n,a){var r=t.emails,o=t.users;return a&&o?o[0].id===n?o[1]:o[0]:r[0]},t.prototype.render=function e(){var t=this,n=this.props,a=n.conversationItems,r=n.viewerId,o=this.state,i=o.contactCounter,s=o.selectedUsers,c=o.selectedEmails,l=o.value,u=new Set,m=a.map(function(e,n){var a=e.emails,o=e.users;a||(a=[]),o||(o=[]);var i=o.length+a.length;if(i>0&&i<=2){var l=0===a.length,d=t.getContactItem(e,r,l);if(d){var m=d.id||d;if(!u.has(m))return u.add(m),R.a.createElement(p,{className:"conversationContactContainer",contactItem:d,conversationItem:e,currentUserID:r,handleContactWrapperClick:t.onHandleContactClick,isSelected:s[m]||c[m],isUser:l,key:m+"-"+n})}}return null});return R.a.createElement("div",null,R.a.createElement("div",{className:ve.a.conversationsGroupHeader},R.a.createElement("h1",{className:ve.a.newMessageTitle},L.a._("New message","conversations")),i>0?this.renderSendMessageButton():this.renderCancelMessageButton()),R.a.createElement("div",{className:ve.a.conversationGroupTokenizedWrapper},R.a.createElement("div",{className:ve.a.tokenizedWrapperTitle},L.a._("To:","new message")),R.a.createElement("div",{className:ve.a.socialTypeaheadContainer},R.a.createElement(d,{tokenizedItems:this.state.tokenizedItems}),R.a.createElement(fe.a,{changeOnTextHover:!1,className:z()(ve.a.typeahead,"reactNewMessageTypeahead"),onChange:function e(n){return t.setState({value:n})},onInviteItemClick:this.handleInviteItemClick,onKeyDown:this.handleTypeaheadKeyDown,showInputPlaceholder:!1,value:this.state.value}))),l?null:R.a.createElement("div",{className:"contactsContainer"},m))},t}(j.Component),we=function e(t){return{viewerId:t.viewer.id}},_e=Object(ne.compose)(Object(D.connect)(we))(Ce),Ie=function(e){function t(){var n,a,r;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=v(this,e.call.apply(e,[this].concat(i))),a.state={boardInviteAccepted:!1,boardInvitePending:!0,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1},a.handleInviteResponse=function(e){var t=a.props.boardInviteItem,n=t.board,r=void 0===n?{}:n,o=t.invited_user,i=void 0===o?{}:o;a.setState({isAcceptButtonLoading:e,isIgnoreButtonLoading:!e});var s={board_id:r.id,invited_user_id:i.id},c=V.a.create("BoardInviteResource",s);(e?c.callUpdate():c.callDelete()).then(function(){a.setState({boardInviteAccepted:e,boardInvitePending:!1,isAcceptButtonLoading:!1,isIgnoreButtonLoading:!1})})},r=n,v(a,r)}return b(t,e),t.prototype.getBoardRep=function e(t,n){return R.a.createElement("div",{className:"leftObjectWrapper boardRepWrapper"},R.a.createElement("div",{className:"Image Module boardMessageRep"},R.a.createElement("div",{className:"heightContainer"},R.a.createElement("img",{alt:t,src:n}))))},t.prototype.getBoardInfo=function e(t,n){return R.a.createElement("a",{href:n},R.a.createElement("div",{className:t},t))},t.prototype.getInviteeInfo=function e(t){var n=t.full_name;return R.a.createElement("div",{className:"inviterLine"},Object(B.h)(L.a._("{{ fullName }} invited you to this board"),{fullName:n}))},t.prototype.renderPendingLayout=function e(t,n){var a=this,r=t.image_thumbnail_url,o=t.name,i=t.url;return R.a.createElement("div",{className:"pending"},R.a.createElement("div",{className:"left"},this.getBoardRep(o,r),R.a.createElement("div",{className:"description"},this.getBoardInfo(o,i),this.getInviteeInfo(n))),R.a.createElement("div",{className:"actions"},R.a.createElement(G.a,{className:"remove",loading:this.state.isIgnoreButtonLoading,onClick:function e(){return a.handleInviteResponse(!1)},text:L.a._("Ignore","ignore board invite")}),R.a.createElement(G.a,{className:z()("primary","accept"),loading:this.state.isAcceptButtonLoading,onClick:function e(){return a.handleInviteResponse(!0)},text:L.a._("Accept","accept board invite")})))},t.prototype.renderCompletedLayout=function e(t){var n=t.image_thumbnail_url,a=t.name,r=t.url;return R.a.createElement("div",{className:"success displayed"},R.a.createElement("div",{className:"left"},this.getBoardRep(a,n),R.a.createElement("div",{className:"description"},this.getBoardInfo(a,r),R.a.createElement("div",{className:"inviterLine"},L.a._("You joined this board","board invites")))))},t.prototype.render=function e(){if(!this.state.boardInvitePending&&!this.state.boardInviteAccepted)return null;var t=this.props.boardInviteItem,n=t.board,a=t.invited_by_user;return R.a.createElement("div",{className:"BoardInvite Module news"},this.state.boardInvitePending?this.renderPendingLayout(n,a):this.renderCompletedLayout(n))},t}(j.Component),Se=Object(q.a)({name:"BoardInvitesResource",key:"boardInvites",options:{current_user:!0,field_set_key:"news"}},{allowStale:!1})(y),Te=n("nX0T"),Oe=500,Ne="existingConversationsView",xe="newMessageView",ke="contactRequestsView",Pe=R.a.createElement("div",{className:"icon"}),je=R.a.createElement("div",{className:"boardInvitesContainer"},R.a.createElement(Se,null)),Re=function(e){function t(){var n,a,r;E(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=C(this,e.call.apply(e,[this].concat(i))),a.state={currentView:Ne},a.handleCancelSecondaryView=function(){a.setState({currentView:Ne})},a.handleNewMessageButtonClick=function(){a.setState({currentView:xe}),a.logNewMessageButtonClick()},a.handleViewContactRequestsClick=function(){a.setState({currentView:ke})},a.handleScroll=function(){a.props.isFetching||(a._container&&a._container.scrollHeight-a._container.scrollTop-a._container.clientHeight)<Oe&&a.fetchMore()},a.logNewMessageButtonClick=function(){(0,a.props.contextLog)(101,{component:54,element:275})},r=n,C(a,r)}return w(t,e),t.prototype.componentDidMount=function e(){this.props.isFullAuth&&this._container.addEventListener("scroll",this.handleScroll)},t.prototype.componentWillUnmount=function e(){this._container.removeEventListener("scroll",this.handleScroll)},t.prototype.fetchMore=function e(){var t=this.props,n=t.isAtEnd,a=t.isFetching,r=t.fetchMoreData,o=t.isFullAuth;!a&&o&&(n?this._container.removeEventListener("scroll",this.handleScroll):r())},t.prototype.renderNewMessageView=function e(){var t=this.props.conversations,n=void 0===t?[]:t;return R.a.createElement("div",{className:"newMessageContainer"},R.a.createElement(_e,{conversationItems:n,handleCancelNewMessageClick:this.handleCancelSecondaryView}))},t.prototype.renderContactRequestsView=function e(){return R.a.createElement("div",{className:"contactRequestsContainer"},R.a.createElement(Q,{handleCancelViewContactRequests:this.handleCancelSecondaryView}))},t.prototype.renderEmptyMessagesNewMessageUpsell=function e(){return R.a.createElement("div",{className:"EmptyConversations Module"},Pe,R.a.createElement("div",{className:"intro"},R.a.createElement("div",null,L.a._("Send messages to your friends!")),R.a.createElement("div",null,L.a._("Plan projects, swap ideas and share your best discoveries."))))},t.prototype.renderExistingConversationsView=function e(){var t=this.props,n=t.conversations,a=void 0===n?[]:n,r=t.isAtEnd;return R.a.createElement("div",{className:"existingConversationsContainer"},R.a.createElement("div",{className:"newMessageButtonContainer"},R.a.createElement(G.a,{className:"createConversationTab",hasIcon:!0,onClick:this.handleNewMessageButtonClick,text:L.a._("New message"),type:"borderless"})),R.a.createElement("div",{className:"viewContactRequestsButtonContainer"},R.a.createElement(K,{onClick:this.handleViewContactRequestsClick})),R.a.createElement("div",{className:"existingConversationItemsWrapper"},je,R.a.createElement("ul",{className:"conversationItems"},0===a.length&&r?this.renderEmptyMessagesNewMessageUpsell():a.map(function(e){return R.a.createElement("li",{className:"conversationItemWrapper",key:e.id},R.a.createElement(de,{data:e}))}))))},t.prototype.renderMessageView=function e(){switch(this.state.currentView){case Ne:return this.renderExistingConversationsView();case xe:return this.renderNewMessageView();case ke:return this.renderContactRequestsView()}},t.prototype.render=function e(){var t=this;return R.a.createElement(Te.a,{view:42,viewParameter:203},R.a.createElement("div",{className:"conversationPanel",ref:function e(n){t._container=n}},this.renderMessageView()))},t}(j.Component),De=function e(t){return{isFullAuth:t.viewer.isAuth&&!t.viewer.isLimitedLogin}},Be=Object(ne.compose)(Object(D.connect)(De),ee.a,Object(q.a)({name:"ConversationsResource",key:"conversations"}))(Re),Le=n("SnoN"),Me={ONE:1,TWO:2,END:3},We=function(e){function t(){var n,a,r;_(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=I(this,e.call.apply(e,[this].concat(i))),a.state={educationStep:Me.ONE},a.toStepTwo=function(){a.setState({educationStep:Me.TWO})},a.dismissEducation=function(){var e=a.props.handleDismiss;a.setState({educationStep:Me.END}),e()},r=n,I(a,r)}return S(t,e),t.prototype.componentDidMount=function e(){var t=this,n=this.props.stepDelay;this.educationStepTimer=setTimeout(function(){t.state.educationStep<Me.TWO&&t.setState({educationStep:Me.TWO})},n)},t.prototype.componentWillUnmount=function e(){clearTimeout(this.educationStepTimer)},t.prototype.renderPill=function e(t,n,a){return R.a.createElement("button",{onClick:a,className:z()("educationPill","slideIn",{fadeOut:n})},R.a.createElement("div",{className:"message"},t))},t.prototype.render=function e(){var t=this.state.educationStep,n=this.props,a=n.titleText,r=n.titleText2,o=this.renderPill(a,t===Me.TWO,this.toStepTwo),i=this.renderPill(r,t===Me.END,this.dismissEducation);return R.a.createElement("div",{className:"newsHubEducation"},R.a.createElement("div",{className:"educationStep stepOne"},(t===Me.ONE||t===Me.TWO)&&o),R.a.createElement("div",{className:"educationStep stepTwo bottom"},(t===Me.TWO||t===Me.END)&&i))},t}(j.Component),Ae=n("zFaW"),Ve=n("7Dxt"),He=Object(Ve.a)(Ae.a),Ue=n("mnfW"),Fe=n("RvAN"),ze=n("mHth"),Ge=n("AYde"),qe=n("YZkw"),Ye=4,Xe=864e5,Ke=function(e){function t(n){T(this,t);var a=O(this,e.call(this,n));return a.state={shouldEducate:!1},a.onDataFetched=function(e){a.props.experience&&e>Ye&&!a.state.shouldEducate&&a.setState({shouldEducate:!0})},a.handleItemClick=function(){a.handleComplete(),a.props.handleItemClick()},a.handleComplete=function(){var e=a.props,t=e.experienceClient,n=e.experience;n&&t.completeExperience(n.placement_id,n.experience_id)},a.handleDismiss=function(){var e=a.props,t=e.experienceClient,n=e.experience;n&&t.dismissExperience(n.placement_id,n.experience_id)},a.renderItem=function(e,t){var n={impressionAuxFields:{displayMode:e.encoded_display_mode,newsType:e.news_type},impressionType:"News",loggingId:e.id,slotIndex:t,viewParameter:3081,viewType:107};return R.a.createElement("li",{className:"newsHubItemWrapper",key:t},a.renderDate(e.last_updated_at,t),R.a.createElement(He,Object.assign({contentItemCount:e.content_item_count,contentItems:e.content_items,contentText:e.content_text,displayMode:e.encoded_display_mode,handleClick:a.handleItemClick,headerIconImageUrl:e.header_icon_image_url,headerIconObjects:e.header_icon_objects,headerText:e.header_text,id:e.id,lastUpdatedAt:e.last_updated_at,overrideClickUrl:e.override_click_url,subHeaderText:e.sub_header_text,siteType:a.props.siteType,textMapping:e.text_mapping,type:e.news_type,unread:e.unread},n)))},a.renderEmptyState=function(){var e=a.props.i18n;return R.a.createElement(H.b,{height:400},R.a.createElement(H.b,{display:"flex",justifyContent:"center",color:"darkGray",shape:"pill",paddingY:5,margin:5},R.a.createElement(H.f,{xs:10},R.a.createElement(H.F,{bold:!0,color:"white",size:"lg"},e._("New! Discover ideas from your friends, followers and people who love your Pins!")))))},a.currentDay=null,a.today=new Date,a.today.setHours(0,0,0,0),a}return N(t,e),t.prototype.getChildContext=function e(){return{preloadingSupported:!0}},t.prototype.componentDidMount=function e(){var t=this.props,n=t.experience,a=t.experienceClient;n&&a.viewExperience(n.placement_id,n.experience_id),this.logPanelImpression()},t.prototype.shouldComponentUpdate=function e(t,n){if(this.state.shouldEducate===n.shouldEducate){var a=this.props.experience,r=t.experience;return(a||{}).id!==(r||{}).id}return!0},t.prototype.getEducation=function e(){var t=this.props.experience;if(this.state.shouldEducate&&t){var n=t.display_data,a=n.step_delay,r=n.title_text,o=n.title_text_2;return R.a.createElement(We,{handleDismiss:this.handleDismiss,stepDelay:a,titleText:r,titleText2:o})}return null},t.prototype.logPanelImpression=function e(){var t=this.props.contextLog,n=Le.a.getInstance(),a=n.getViewFromContext();t(13,{view:107,viewParameter:3081}),n.addViewToContext(a)},t.prototype.renderDate=function e(t,n){var a=this.props.i18n,r=new Date(t);if(r.setHours(0,0,0,0),0!==n&&null!==this.currentDay&&void 0!==this.currentDay){var o=this.currentDay;if(r.getTime()===o.getTime())return null}this.currentDay=r;var i=void 0;return i=r.getTime()===this.today.getTime()?a._("Today"):r.getTime()===new Date(this.today-864e5).getTime()?a._("Yesterday"):r&&r>=new Date(this.today-5184e5)?a.getHumanizedTimesince(r.toString()):Ue.b.formatDate(this.props.locale,r,Ue.b.DateFormatType.MONTH_DAY,!1),R.a.createElement("div",{className:"newsHubItemDate"},R.a.createElement(H.F,{bold:!0,size:"xl"},i))},t.prototype.render=function e(){return R.a.createElement(Te.a,{view:107,viewParameter:3081},R.a.createElement("div",null,this.getEducation(),R.a.createElement(Fe.a,{className:"newsHubPanel",onDataFetched:this.onDataFetched,renderEmptyState:this.renderEmptyState,renderItem:this.renderItem,resourceName:"NewsHubResource"})))},t}(j.Component);Ke.defaultProps={handleItemClick:function e(){}},Ke.childContextTypes={preloadingSupported:W.a.bool.isRequired};var Ze=Object(ne.compose)(Object(qe.a)(1000035),ee.a,Ge.b,ze.a)(Ke),Qe=n("xYG1"),Je=R.a.createElement(Be,null),$e=function(e){function t(){return x(this,t),k(this,e.apply(this,arguments))}return P(t,e),t.prototype.shouldComponentUpdate=function e(t,n){return this.props.currentPanel!==t.currentPanel||this.props.conversationsUnseenCount!==t.conversationsUnseenCount||this.props.newsHubCount!==t.newsHubCount},t.prototype.render=function e(){var t=this.props,n=t.conversationsUnseenCount,a=t.currentPanel,r=t.handleItemClick,o=t.locale,i=t.newsHubCount,s=t.onButtonClick,c=t.siteType,l=void 0;return a===Qe.a.NEWS_HUB?l=R.a.createElement(Ze,{handleItemClick:r,locale:o,siteType:c}):a===Qe.a.INBOX&&(l=Je),R.a.createElement("div",{className:"NewsConversationsDropdown"},R.a.createElement(Qe.b,{conversationsUnseenCount:n,newsHubCount:i,onButtonClick:s,selectedTab:a}),R.a.createElement("div",{className:"content"},l))},t}(j.Component),et=t.default=$e},"7Dxt":function(e,t,n){"use strict";function a(e){var t=void 0;d.a.instance.subscribe(function(){var n=d.a.instance.getState();if(n&&n.location){var a=n.location.pathname;a!==t&&(t=a,e())}})}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){w={}}function c(){_||(E.b.subscribe("site","navigateStarted",s),a(s),_=!0)}function l(e){var t=Object(v.a)(e),n=function(e){function n(){var t,a,i;r(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return t=a=o(this,e.call.apply(e,[this].concat(c))),a.currentNs=function(){return Date.now()*S},a.startTime=0,a.handleVisibilityChanged=function(e,t){var n=a.props,r=n.componentType,o=n.contextLog,i=n.contextLogData,s=n.impressionAuxFields,c=n.impressionType,l=n.loggingId,u=n.removeClientDedupe,p=n.slotIndex,d=n.viewParameter,m=n.viewType,h=n.viewData,f=C(d,c,l);if(u||!w[f])if(e<=0){var g,v,b=t.boundingClientRect.top,y=I[c],E=y.idType,_=a.currentNs(),S=Object.assign((g={endTime:_},g[E]=l,g.slotIndex=p,g.time=a.startTime,g.yPosition=b,g),s);o(y.eventType,Object.assign({component:r,eventData:(v={},v[y.impressionType]=[S],v),view:m,viewParameter:d,viewData:h,grid_index:p},i)),u||(w[f]=!0)}else a.startTime=a.currentNs()},i=t,o(a,i)}return i(n,e),n.prototype.componentDidMount=function e(){c()},n.prototype.render=function e(){return p.a.createElement(t,Object.assign({onVisibilityChanged:this.handleVisibilityChanged},this.props))},n}(u.Component);return Object(b.compose)(f.a,Object(g.a)(function(e,t){return{removeClientDedupe:"enabled"===t.v2ActivateExperiment("web_pin_impressions")}}))(n)}var u=n("OVW8"),p=n.n(u),d=n("4Qfy"),m=n("IaRT"),h=n.n(m),f=n("Kqaz"),g=n("dCTv"),v=n("sHx0"),b=n("MQ2h"),y=n.n(b),E=n("Cjb7");t.a=l;var C=function e(t,n,a){return t+":"+n+":"+a},w={},_=!1,I={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110}},S=1e6},"7IpV":function(e,t,n){"use strict";function a(e){return e===window?window.innerHeight:e.clientHeight}function r(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function o(e){return e===window?r():e.scrollTop-e.getBoundingClientRect().top}function i(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function s(e){return e===window?r():e.scrollTop}t.a=a,t.d=r,t.b=i,t.c=s},"9bGG":function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){return function(t){function n(){var e,o,i;a(this,n);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return e=o=r(this,t.call.apply(t,[this].concat(c))),o.state={isHovering:!1},o.handlers={onMouseOver:function e(){return o._setHover(!0)},onMouseLeave:function e(){return o._setHover(!1)}},i=e,r(o,i)}return o(n,t),n.prototype.componentDidMount=function e(){f(this)},n.prototype.componentWillUnmount=function e(){clearTimeout(this.hoverTimer),g(this)},n.prototype._setHover=function e(t){var n=this;clearTimeout(this.hoverTimer),this.hoverTimer=t&&d?setTimeout(function(){return n._setHover(t)},u):setTimeout(function(){t!==n.state.isHovering&&n.setState({isHovering:t})},l)},n.prototype.render=function t(){return c.a.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))},n}(s.Component)}t.a=i;var s=n("OVW8"),c=n.n(s),l=32,u=100,p=null,d=!1,m=[],h=function e(){clearTimeout(p),d=!0,p=setTimeout(function(){d=!1},u)},f=function e(t){0===m.length&&window.addEventListener("scroll",h),m.push(t)},g=function e(t){var n=m.indexOf(t);m.splice(n,1),0===m.length&&window.removeEventListener("scroll",h)}},IxI0:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){var t=e.boardId,n=i(e,["boardId"]);return Object(f.createElement)(Object(k.a)({name:"BoardFeedResource",options:{board_id:t,page_size:50,field_set_key:"board_cover_picker",filter_section_pins:!1},key:"pins"},{allowStale:!1})(P),Object.assign({boardId:t},n))}function p(e){var t=e.alignTop,n=e.children,a=e.label,r=e.labelId;return g.a.createElement(j.b,{alignItems:t?null:"center",deprecatedPadding:{x:2,y:3},xs:{display:"flex"},wrap:!0},g.a.createElement(j.b,{deprecatedPadding:{y:2},xs:{column:12},md:{column:3}},g.a.createElement(B,{label:a,labelId:r})),g.a.createElement(j.b,{xs:{column:12},md:{column:9}},n))}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var f=n("OVW8"),g=n.n(f),v=n("DUIN"),b=n("FrUj"),y=n("5tOk"),E=n("W/Cr"),C=n("nM9s"),w=n("IaRT"),_=n.n(w),I="236x",S=function(e){function t(){var n,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.state={deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}},o.handleUpdateImage=function(){var e=o.image,t=e.offsetHeight,n=e.offsetWidth;o.setState({isSpinnerShown:!1,startBgPos:{left:-(n-o.state.holderWidth)/2,top:-(t-o.state.holderHeight)/2}})},o.handleOnMouseUp=function(){o.isDragging=!1,o.setState({startBgPos:{left:o.getBgLeft(),top:o.getBgTop()},deltaX:0,deltaY:0}),o.props.updateImgCrop(o.getCropData())},i=n,r(o,i)}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.holder;this.setState({holderHeight:t.offsetHeight,holderWidth:t.offsetWidth}),document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)},t.prototype.componentWillReceiveProps=function e(t){t.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})},t.prototype.componentWillUnmount=function e(){document.body.removeEventListener("mouseup",this.handleOnMouseUp)},t.prototype.getFrameBounds=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this.state,o=r.holderHeight;return{left:r.holderWidth/2-a/2,width:a,height:n,top:o/2-n/2}},t.prototype.getBgLeft=function e(){var t=this.props.frameWidth,n=this.getFrameBounds(),a=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*a,i=r.imgWidth*a,s=0;return o&&i&&((s=this.state.startBgPos.left+this.state.deltaX)+i-t<n.left&&(s=n.left-i+t),s>n.left&&(s=n.left)),s},t.prototype.getBgTop=function e(){var t=this.props.frameHeight,n=this.getFrameBounds(),a=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*a,i=r.imgWidth*a,s=0;return o&&i&&((s=this.state.startBgPos.top+this.state.deltaY)+o-t<n.top&&(s=n.top-o+t),s>n.top&&(s=n.top)),s},t.prototype.getImgScale=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this._getImageDimensions(),o=r.imgHeight,i=r.imgWidth,s=this.getFrameBounds();if(o&&i){var c=o/i;return c=c>=s.height/s.width?a/i:n/o}return 1},t.prototype.getImageBounds=function e(){var t=this._getImageDimensions(),n=t.imgHeight,a=t.imgWidth,r={};if(n&&a){var o=this.getImgScale();r={width:o*a,height:o*n}}return r},t.prototype.getBgBounds=function e(){return{left:this.getBgLeft(),top:this.getBgTop()}},t.prototype.getCropData=function e(){var t=this.props,n=t.frameHeight,a=t.frameWidth,r=this.getFrameBounds(),o=this._getImageDimensions(),i=o.imgHeight,s=o.imgWidth,c=this.getBgBounds(),l=this.getImgScale();return{crop_x:Math.round(-(c.left-r.left)/l),crop_y:Math.round(-(c.top-r.top)/l),nativeHeight:i,nativeWidth:s,height:Math.round(n/l),width:Math.round(a/l),scale:1}},t.prototype.handleOnMouseDown=function e(t){0===t.nativeEvent.button&&(t.stopPropagation(),this.isDragging=!0,this.originX=t.pageX,this.originY=t.pageY)},t.prototype.handleOnMouseMove=function e(t){this.isDragging&&this.setState({deltaX:t.pageX-this.originX,deltaY:t.pageY-this.originY})},t.prototype._getImageDimensions=function e(){var t=this.props.pin.images["236x"];return{imgHeight:t.height,imgWidth:t.width}},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardName,r=n.frameHeight,o=n.frameWidth,i=n.isFirst,s=n.isLast,c=n.pin,l=n.showNextPin,u=n.showPrevPin,p=this.state.isSpinnerShown,d=this._getImageDimensions(),m=d.imgHeight,h=d.imgWidth,f=this.getFrameBounds(),v=this.getImageBounds(),b=this.getBgBounds(),w="";return m&&h&&(w="in"),g.a.createElement("div",{className:"ImageCrop"},g.a.createElement("div",{className:"holder",ref:function e(n){t.holder=n}},g.a.createElement("div",{className:"bg",style:b},g.a.createElement("img",{alt:y.c(E.a._("Board cover for {{ boardName }}"),{boardName:a}),className:w,onLoad:this.handleUpdateImage,ref:function e(n){t.image=n},src:c.images["236x"].url,style:v})),g.a.createElement("div",{className:"mask"},g.a.createElement("span",{style:{top:0,left:0,right:0,height:f.top}}),g.a.createElement("span",{style:{top:f.top,left:f.left+o,right:0,height:r}}),g.a.createElement("span",{style:{top:r+f.top,left:0,right:0,bottom:0}}),g.a.createElement("span",{style:{top:f.top,left:0,width:f.left,height:r}})),g.a.createElement("div",{className:"frame",style:f}),g.a.createElement("div",{className:"drag",onMouseDown:function e(n){t.handleOnMouseDown(n)},onMouseMove:function e(n){t.handleOnMouseMove(n)}}),g.a.createElement("div",{className:"spinner",style:{display:p?"":"none"}})),i?null:g.a.createElement(C.a,{className:"previous",onClick:u,text:""}),s?null:g.a.createElement(C.a,{className:"next",onClick:l,text:""}))},t}(f.Component);S.defaultProps={frameHeight:111,frameWidth:236};var T=S,O=n("/e0Y"),N=n("ZtCB"),x=n.n(N),k=n("Grh7"),P=function(e){function t(){var n,a,r;s(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=a=c(this,e.call.apply(e,[this].concat(i))),a.state={coverPinIndex:0,imgCropData:{},isSaving:!1},a.handleSave=function(){a.setState({isSaving:!0});var e=a.props,t=e.pins,n=void 0===t?{}:t,r=e.boardId,o=a.state,i=o.coverPinIndex,s=o.imgCropData,c=n[i],l=c.images["236x"],u=l.url;O.a.trackEvent("board_edit_cover","click_submit");var p=Object.assign({pin_id:c.id,pin_image_url:u},s),d=Object.assign({board_id:r,url:u},p);x.a.create("BoardResource",d).callUpdate().then(function(){O.a.trackEvent("board_edit_cover","success"),a.setState({isSaving:!1}),a.props.onSave(u,{height:l.height,width:l.width,x:s.crop_x,y:s.crop_y})}).catch(function(){a.setState({isSaving:!1})})},a.updateImgCrop=function(e){a.setState({imgCropData:e})},r=n,c(a,r)}return l(t,e),t.prototype.componentDidUpdate=function e(t){var n=this.props.pins,a=t.pins;(n&&a!==n&&n.length||n&&a&&n.length!==a.length)&&n.forEach(function(e){(new Image).src=e.url})},t.prototype.changePin=function e(t){t<0||t>=this.props.pins.length||this.setState({coverPinIndex:t})},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardName,r=n.frameHeight,o=n.frameWidth,i=n.pins,s=this.state,c=s.coverPinIndex,l=s.isSaving;return i?g.a.createElement("div",{className:"BoardCoverEditPage"},g.a.createElement("div",{className:"standardForm"},g.a.createElement("h1",null,g.a.createElement("strong",null,E.a._("Change Board Cover"))," / "+a),g.a.createElement("div",{className:"boardCoverEditPageContainer"},g.a.createElement("div",{className:"BoardCoverEdit"},g.a.createElement(T,{boardName:a,frameHeight:r,frameWidth:o,isFirst:!c,isLast:c===i.length-1,pin:i[c],showNextPin:function e(){t.changePin(c+1)},showPrevPin:function e(){t.changePin(c-1)},updateImgCrop:this.updateImgCrop})),g.a.createElement("div",{className:"formFooter"},g.a.createElement("div",{className:"formFooterButtons"},g.a.createElement(C.a,{isSaving:l,onClick:this.props.onCancel,text:E.a._("Cancel")}),g.a.createElement(C.a,{onClick:this.handleSave,text:E.a._("Save Changes"),type:"primary"})))))):null},t}(f.Component);u.propTypes={boardId:_.a.string.isRequired};var j=n("gEaE"),R=g.a.createElement(j.h,null),D=function e(t){var n=t.children;return g.a.createElement(j.b,{role:"list"},g.a.Children.map(n,function(e,t){return e&&g.a.createElement(j.b,{key:t},e,R)}))},B=function e(t){var n=t.label,a=t.labelId;return a?g.a.createElement(j.p,{htmlFor:a},g.a.createElement(j.F,{size:"sm"},n)):g.a.createElement(j.F,{size:"sm"},n)};p.PropTypes={alignTop:_.a.bool,children:_.a.node,labelId:_.a.string,label:_.a.string};var L=n("BAXv"),M=n("LQgx"),W=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),A=g.a.createElement(j.h,null),V=function(e){function t(n){d(this,t);var a=m(this,e.call(this,n));return a.handleChangeName=function(e){var t=b.getErrors(a.nameValidators,e);a.setState({name:e,nameValidatorErrors:t})},a.handleChangeDescription=function(e){var t=b.getErrors(a.descriptionValidators,e);a.setState({description:e,descriptionValidatorErrors:t})},a.handleChangeCategory=function(e){var t=e.value;a.setState({category:t})},a.handleChangePrivateToggle=function(e){a.setState({privacy:e?"secret":"public"})},a.handleChangeCollabBoardEmail=function(e){a.setState({collab_board_email:e})},a.handleChangeCollaboratorInvitesEnabled=function(e){a.setState({collaboratorInvitesEnabled:e})},a.handleCancel=function(){O.a.trackEvent(a.props.gaCategory,"click_cancel"),a.props.onClose()},a.handleSubmit=function(e){e&&e.preventDefault(),a.submitDisabled()||(O.a.trackEvent(a.props.gaCategory,"click_submit"),a.props.onSubmit(a.fieldValues))},a.handleDelete=function(){a.props.onDeleteButtonClick()},a.handleShowBoardCoverEditModal=function(){a.setState({showBoardCoverEdit:!0})},a.handleHideBoardCoverEditModal=function(){a.setState({showBoardCoverEdit:!1})},a.handleSaveBoardCoverEditModal=function(){var e;a.handleHideBoardCoverEditModal(),(e=a.props).onCropChange.apply(e,arguments)},a.state=Object.assign({},n.board,{collaboratorInvitesEnabled:n.board.collaborator_invites_enabled||!1,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showDeleteConfirmation:!1}),a.descriptionValidators=[b.Length({max:L.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION})],a.nameValidators=[b.Required({message:E.a._("Don't forget to name your board!")}),b.Length({max:L.a.MAX_CHARS_FOR_BOARD_TITLE})],a}return h(t,e),t.prototype.getBoardTitleInput=function e(){var t=this.state,n=t.name,a=t.nameValidatorErrors;return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Name"),labelId:"boardEditName"},g.a.createElement(j.H,{errorMessage:a.join(", "),id:"boardEditName",name:"boardName",onChange:this.handleChangeName,placeholder:E.a._('Like "Places to Go" or "Recipes to Make"'),value:n})))},t.prototype.getCategoriesDropdown=function e(){var t=this.props.categories.map(function(e){return{label:e.name,value:e.key}}),n=[{value:"",label:E.a._("What kind of board is it?")}].concat(t),a=this.state.category||"";return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Category"),labelId:"boardEditCategory"},g.a.createElement(j.B,{id:"boardEditCategory",name:"category",onChange:this.handleChangeCategory,options:n,value:a})))},t.prototype.getCollaboratorsEmailCheckbox=function e(){var t=this.props.board,n=this.state.collab_board_email;return t.is_collaborative&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Email notifications"),labelId:"secret"},g.a.createElement(j.b,{alignItems:"center",deprecatedPadding:{y:2},xs:{display:"flex"}},g.a.createElement(j.b,{deprecatedMargin:{right:1}},g.a.createElement(j.D,{switched:n,id:"emailCheckbox",name:"email",onChange:this.handleChangeCollabBoardEmail})),g.a.createElement(j.F,{size:"xs",smSize:1,mdSize:2,lgSize:"xs"},E.a._("Get an email when someone saves Pins to this board")))))},t.prototype.getCollaboratorsInviteList=function e(){var t=this.props,n=t.boardCollaboratorsSection,a=t.showCollaboratorsLearnMore,r=g.a.createElement(j.b,null,E.a._("Collaborators"),a&&g.a.createElement(j.b,null,g.a.createElement(j.r,{target:"blank",href:L.a.GEN.templateConst.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},g.a.createElement(j.F,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},E.a._("Learn more")))));return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{alignTop:!0,label:r,labelId:"collaborators"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement("div",{className:"boardCollaboratorsWrapper"},n))))},t.prototype.getCollaboratorsInviteToggle=function e(){var t=this.props.board,n=this.state.collaboratorInvitesEnabled;return t.is_collaborative&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Let collaborators add people"),labelId:"collaboratorInvitesEnabledCheckbox"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement(j.D,{switched:n,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:this.handleChangeCollaboratorInvitesEnabled}))))},t.prototype.getCoverEdit=function e(){var t=this.props,n=t.coverImageHeight,a=t.coverImageWidth,r=t.isEditable,o=this.state,i=o.id,s=o.name,c=o.pin_count;return r&&c>0&&g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:E.a._("Cover")},g.a.createElement(j.c,{inline:!0,onClick:this.handleShowBoardCoverEditModal,text:E.a._("Change"),size:"md"}),this.state.showBoardCoverEdit&&g.a.createElement(M.a,{onHide:this.handleHideBoardCoverEditModal},g.a.createElement(u,{boardId:i,boardName:s,frameHeight:n,frameWidth:a,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}))))},t.prototype.getDescriptionInput=function e(){var t=this.state,n=t.description,a=t.descriptionValidatorErrors;return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{alignTop:!0,label:E.a._("Description"),labelId:"boardEditDescription"},g.a.createElement(j.G,{errorMessage:a.join(", "),id:"boardEditDescription",name:"description",onChange:this.handleChangeDescription,placeholder:E.a._("What's your board about?"),value:n})))},t.prototype.getFormFooter=function e(){var t=this.props,n=t.board.id,a=t.creating,r=t.deleting,o=t.updating,i=t.isDeletable,s=t.submitText,c=a,l=r&&r[n],u=o&&o[n],p=void 0,d=c&&c.error||l&&l.error||u&&u.error;d&&(p=E.a._("Uh oh! Something went wrong."),d.message?p=d.message:"string"==typeof d&&(p=d));var m=this.submitDisabled()||c&&c.creating||u&&u.updating||l&&l.deleting;return g.a.createElement(j.b,{alignItems:"center",justifyContent:"between",deprecatedPadding:{x:2,y:3},wrap:!0,xs:{display:"flex"}},i&&g.a.createElement(j.b,{deprecatedMargin:{right:"auto"}},g.a.createElement(j.c,{id:"deleteBoardButton",inline:!0,disabled:!!l,onClick:this.handleDelete,text:E.a._("Delete board"),size:"md"})),p&&g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.F,{color:"red",smSize:"xs",mdSize:"sm",lgSize:"md"},p)),g.a.createElement(j.b,{deprecatedMargin:{left:"auto"}},g.a.createElement(j.b,{xs:{display:"flex"},deprecatedMargin:{left:-1,right:-1}},g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.c,{id:"cancelButton",inline:!0,onClick:this.handleCancel,text:E.a._("Cancel"),size:"md"})),g.a.createElement(j.b,{deprecatedPadding:{x:1}},g.a.createElement(j.c,{color:"red",disabled:!!m,inline:!0,id:"submitButton",onClick:this.handleSubmit,text:s,size:"md"})))))},t.prototype.getSecretToggle=function e(){var t=this.props.showSecretBoardsLearnMore,n=this.state.privacy;if("protected"!==n){var a=g.a.createElement(j.b,null,E.a._("Secret"),t&&g.a.createElement(j.b,null,g.a.createElement(j.r,{target:"blank",href:L.a.GEN.templateConst.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},g.a.createElement(j.F,{size:"sm",smSize:2,mdSize:"xs",lgSize:"sm"},E.a._("Learn more")))));return g.a.createElement(j.b,{role:"listitem"},g.a.createElement(p,{label:a,labelId:"secret"},g.a.createElement(j.b,{deprecatedPadding:{y:2}},g.a.createElement(j.D,{switched:"secret"===n,id:"secret",name:"secret",onChange:this.handleChangePrivateToggle}))))}return null},t.prototype.getBoardFormFields=function e(){var t=this.props,n=t.currentUserIsOwner,a=t.isNameAndSecretView;return n?a?g.a.createElement(D,null,this.getBoardTitleInput(),this.getSecretToggle()):g.a.createElement(D,null,this.getBoardTitleInput(),this.getDescriptionInput(),this.getCategoriesDropdown(),this.getCoverEdit(),this.getSecretToggle(),this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox(),this.getCollaboratorsInviteToggle()):g.a.createElement(D,null,this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox())},t.prototype.submitDisabled=function e(){var t=this.state,n=t.descriptionValidatorErrors,a=t.name,r=t.nameValidatorErrors;return!a||r.length>0||n.length>0},t.prototype.render=function e(){return g.a.createElement(j.b,{color:"white",deprecatedMargin:{left:"auto",right:"auto"},maxWidth:600,shape:"rounded"},g.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},g.a.createElement(j.b,{deprecatedMargin:{right:5},deprecatedPadding:{x:2,y:3}},this.props.title),A,this.getBoardFormFields(),this.getFormFooter()))},W(t,[{key:"fieldValues",get:function e(){return{name:this.state.name,description:this.state.description,category:this.state.category,privacy:this.state.privacy,collab_board_email:this.state.collab_board_email,collaborator_invites_enabled:this.state.collaboratorInvitesEnabled}}}]),t}(f.Component);V.defaultProps={isNameAndSecretView:!1,showCollaboratorsLearnMore:!0,showSecretBoardsLearnMore:!0};var H=function e(t){return t.boards&&t.boards},U=t.a=Object(v.connect)(H)(V)},NYeZ:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return l.a.createElement("img",{alt:e,className:"head",src:t})}function s(e){return{viewerId:e.viewer.id}}var c=n("OVW8"),l=n.n(c),u=n("DUIN"),p=n("GGB8"),d=n.n(p),m=n("IaRT"),h=n.n(m),f=3,g=[["fullWrapper"],["leftWrapper halfWrapper","rightWrapper halfWrapper isWholeHalf"],["leftWrapper halfWrapper","rightWrapper halfWrapper smallImage top","rightWrapper halfWrapper smallImage bottom"]],v=function e(t,n){var a=t.name,r=t.image_thumbnail_url;return l.a.createElement("div",{className:d()("Image","Module","boardMessageRep",n)},l.a.createElement("img",{alt:a,src:r}))},b=function e(t){function n(e){var t=e.full_name,n=e.is_default_image,a=e.image_large_url,r=e.image_medium_url,s=e.username,c=t?t[0].toUpperCase():"",u=a||r;return u&&!n?o?l.a.createElement("div",null,l.a.createElement("a",{href:"/"+s+"/"},i(t,u))):l.a.createElement("div",null,i(t,u)):l.a.createElement("div",{className:"head"},c)}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments[2],o=arguments[3],s=["ConversationHead",t];return l.a.createElement("div",{className:s.join(" ")},l.a.createElement("div",{className:"contentContainer"},l.a.createElement("div",{className:"headWrapper"},l.a.createElement("div",{className:"imagesWrapper"},a.map(function(e,t){return l.a.createElement("div",{className:e,key:t},n(r[t]))})))))},y=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.getUsersToShow=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=this.props.viewerId;return void 0!==a&&(n=n.filter(function(e){return e.id!==a})),n.concat(t.map(function(e){return{full_name:e}})).slice(0,3)},t.prototype.render=function e(){var t=this.props,n=t.board,a=t.emails,r=t.shouldLink,o=t.size,i=t.users,s=this.getUsersToShow(a,i),c=s.length<=3?g[s.length-1]:[];return n?v(n,o):b(o,c,s,r)},t}(c.Component);y.defaultProps={shouldLink:!1,size:"medium"},t.a=Object(u.connect)(s)(y)},NfjA:function(e,t,n){"use strict";function a(e){m.a.instance().handleConnect(e,!0,{})}function r(e){var t,n=e.network,r=(t={},t[f]=l.a._("Find friends from Facebook"),t[g]=l.a._("Find friends from Google+"),t[v]=l.a._("Find friends from Twitter"),t[b]=l.a._("Find friends from Yahoo"),t);return i.a.createElement("div",{className:"socialConnect",role:"listitem"},i.a.createElement(h.K,{onTouch:function e(){return a(n)}},i.a.createElement("div",{className:"socialConnectItem"},i.a.createElement("div",{className:"left"},i.a.createElement("div",{className:c()("icon","socialConnect-"+n)},y)),i.a.createElement("div",{className:"right"},i.a.createElement("h4",{className:"title"},r[n])))))}t.a=r;var o=n("OVW8"),i=n.n(o),s=n("GGB8"),c=n.n(s),l=n("W/Cr"),u=n("IaRT"),p=n.n(u),d=n("Svvu"),m=n("cD7N"),h=n("gEaE"),f=d.default.FACEBOOK,g=d.default.GPLUS,v=d.default.TWITTER,b=d.default.YAHOO,y=i.a.createElement("em",null)},PrM5:function(e,t,n){"use strict";function a(e){var t;return t={},t[r]={connected:!!e.facebook_url,url:e.facebook_url},t[i]={connected:e.connected_to_google||!1},t[s]={connected:!!e.gplus_url},t[l]={connected:e.connected_to_microsoft||!1},t[o]={connected:!!e.twitter_url,url:e.twitter_url},t[c]={connected:e.connected_to_yahoo||!1},t}t.e=a,n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return i}),n.d(t,"d",function(){return c});var r="facebook",o="twitter",i="google",s="gplus",c="yahoo",l="microsoft"},RvAN:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=Object(v.a)({name:e.resourceName,options:Object.assign({page_size:e.pageSize},e.resourceOptions)})(C);return c.a.createElement(t,e)}t.a=i;var s=n("OVW8"),c=n.n(s),l=n("GGB8"),u=n.n(l),p=n("W/Cr"),d=n("IaRT"),m=n.n(d),h=n("WBZ1"),f=n.n(h),g=n("gEaE"),v=n("Grh7"),b=n("7IpV"),y={UP:"up",DOWN:"down"},E=100,C=function(e){function t(){var n,o,i;a(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=o=r(this,e.call.apply(e,[this].concat(c))),o.handleScroll=f()(function(){if(!o.props.isFetching){var e=o.props.scrollThreshold;Object(b.b)(o._container)-Object(b.c)(o._container)-Object(b.a)(o._container)<e&&o.fetchMore()}},E),o.addEventListeners=function(e){var t=o.props.useWindow;t&&(e=window),o.removeEventListeners(),e&&(t||e.addEventListener("wheel",o.preventScroll),e.addEventListener("scroll",o.handleScroll)),o._container=e},o.preventScroll=function(e){var t=e.deltaY<0?y.UP:y.DOWN,n=o._container.scrollHeight-o._container.scrollTop-o._container.clientHeight==0,a=0===o._container.scrollTop;(t===y.DOWN&&n||t===y.UP&&a)&&e.preventDefault()},i=n,r(o,i)}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){var n=t.data.length;(0,t.onDataFetched)(n)},t.prototype.componentWillUnmount=function e(){this.removeEventListeners()},t.prototype.removeEventListeners=function e(){var t=this.props.useWindow;this._container&&(t||this._container.removeEventListener("wheel",this.preventScroll),this._container.removeEventListener("scroll",this.handleScroll))},t.prototype.fetchMore=function e(){this.props.isFetching||(this.props.isAtEnd?this._container.removeEventListener("scroll",this.handleScroll):this.props.fetchMoreData())},t.prototype.render=function e(){var t=this.props,n=t.className,a=t.renderEmptyState,r=t.renderItem;return this.props.isFetching||0!==this.props.data.length?c.a.createElement("div",{className:u()(n,"listContainer"),ref:this.addEventListeners},this.props.data?c.a.createElement("ul",{className:"scrollableList"},this.props.data.map(function(e,t){return r(e,t)})):null,this.props.isAtEnd?null:c.a.createElement("div",{className:"loadingItem"},c.a.createElement(g.C,{accessibilityLabel:p.a._("Loading items"),show:this.props.isFetching}))):a()},t}(s.Component);C.defaultProps={data:[],onDataFetched:function e(){},scrollThreshold:400,useWindow:!1},i.defaultProps={pageSize:10}},Vfgg:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=/[\- _,.<>:;+=*&@~\/\|!]*$/,r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…",o=void 0;if(t.length<=n)return t;if(" "!==t[n-1]&&" "===t[n])o=t.substring(0,n);else{var i=t.lastIndexOf(" ",n);o=t.substring(0,i)}return(o=o.replace(a,""))+r},o=/\s\s+/g,i=function e(t){return t.replace(o," ")}},XpQc:function(e,t,n){
(t=e.exports=n("D0DK")()).push([e.i,"._1mN_2 {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-pack: justify;\n        -ms-flex-pack: justify;\n            justify-content: space-between;\n    padding: 10px;\n}\n\n._3b2sr {\n    background: #f1f1f1;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding: 10px;\n}\n\n._1zZTh {\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n    color: #b5b5b5;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    padding-right: 10px;\n}\n\n.ClU2f {\n    font-size: 14px;\n}\n\n._1UOMX {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    -webkit-box-flex: 1;\n        -ms-flex-positive: 1;\n            flex-grow: 1;\n    position: relative;\n}\n",""]),t.locals={conversationsGroupHeader:"_1mN_2",conversationGroupTokenizedWrapper:"_3b2sr",tokenizedWrapperTitle:"_1zZTh",newMessageTitle:"ClU2f",socialTypeaheadContainer:"_1UOMX"}},Y504:function(e,t,n){(function(t){var n,a=t.crypto||t.msCrypto;if(a&&a.getRandomValues){var r=new Uint8Array(16);n=function e(){return a.getRandomValues(r),r}}if(!n){var o=new Array(16);n=function(){for(var e=0,t;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=n}).call(t,n("5jJ4"))},aoZs:function(e,t,n){"use strict";function a(e){var t=e.body,n=void 0===t?"":t,a=e.img,r=e.onClick,o=e.selected,i=e.title,s=x()("ImageBlock","sendShareUserContact","selectable",{selected:o});return w.a.createElement("div",{className:s,onClick:r,role:"button"},w.a.createElement("div",{className:"left circle imageSize_sendShare"},a),w.a.createElement("div",{className:"right"},w.a.createElement("h4",{className:"imageBlockContentTitle"},i),w.a.createElement("div",{className:"imageBlockContentBody"},w.a.createElement("span",null,n))))}function r(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var r=w.a.createElement("img",{alt:e.title,src:e.image_small_url});return w.a.createElement(a,{img:r,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return n(e)}),selected:t,title:e.full_name})}if("email"===e.type){var o=e.address,i=e.valid,s=i?w.a.createElement("span",{className:"icon"},o[0].toUpperCase()):P,c=Object(k.c)(I.a._("Email {{ email }}"),{email:o}),l=i?I.a._("Click to send!"):I.a._("Keep typing!");return w.a.createElement(a,{body:l,img:s,onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return i?n(e):void 0}),selected:t,title:c})}}function o(e){return w.a.createElement(a,{img:j,onClick:e.onClick,selected:!1,title:e.message})}function i(e){B.a.instance().handleConnect(e,!0,{})}function s(e){return e===L?I.a._("Facebook"):e===W?I.a._("Twitter"):e===M?I.a._("Google"):e===A?I.a._("Yahoo"):I.a._("Other")}function c(e,t){if(e===L)return I.a._("Friends who are on Pinterest");if(e===M){if(t&&-1!==t.indexOf("@gmail"))return t}else if(e===A&&t&&-1!==t.indexOf("@yahoo"))return t;return null}function l(e){var t=x()("SocialNetworkConnectButton","listItem","sendShare",e.network),n=c(e.network,e.email);return w.a.createElement("a",{onClick:e.onClick,role:"button"},w.a.createElement("div",{className:t},H,w.a.createElement("div",{className:"networkInfo"},w.a.createElement("h4",{className:"title"},s(e.network)),n?w.a.createElement("div",{className:"subtitle"},n):null)))}function u(e){var t=Object(R.e)(e.user),n=V.filter(function(e){return!1===t[e].connected});return w.a.createElement("div",{className:"SocialConnectPanel fullWidth compact sendShare"},w.a.createElement("div",{className:"header"},w.a.createElement("div",{className:"backNav"},w.a.createElement("a",{onClick:e.onClose,role:"button"},U,w.a.createElement("span",{className:"label"},I.a._("Back")))),w.a.createElement("div",{className:"prompt"},I.a._("Upload contacts from..."))),w.a.createElement("ul",{className:"socialConnectOptions"},n.map(function(t){return w.a.createElement("li",{key:t},w.a.createElement(l,{email:e.user.email,network:t,onClick:function e(){return i(t)}}))})))}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t,n){var a=e.id;return t===n.findIndex(function(e){return e.id===a})}function f(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function y(e,t){return K.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function E(e,t){return K.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}var C=n("OVW8"),w=n.n(C),_=n("DUIN"),I=n("W/Cr"),S=n("XSNT"),T=n("IaRT"),O=n.n(T),N=n("GGB8"),x=n.n(N),k=n("5tOk"),P=w.a.createElement("span",{className:"icon typingEmail"},w.a.createElement("em",null)),j=w.a.createElement("em",{className:"icon socialConnectCta"}),R=n("PrM5"),D=n("Svvu"),B=n("cD7N"),L=D.default.FACEBOOK,M=D.default.GOOGLE,W=D.default.TWITTER,A=D.default.YAHOO,V=[L,W,M,A],H=w.a.createElement("em",{className:"icon"}),U=w.a.createElement("span",{className:"icon"}),F=n("skut"),z=n("Grh7"),G=function(e){function t(){var n,a,r;p(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=d(this,e.call.apply(e,[this].concat(i))),a.state={selectedCollaborators:[],showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""},a.handleTextFieldChange=function(e){a.setState({value:e})},a.handleCloseSocialConnectPanel=function(){a.setState({showSocialConnectPanel:!1})},a.handleCollaboratorClick=function(e){var t=e.id;a.isIdSelected[t]=!a.isIdSelected[t];var n=a.state.selectedCollaborators.concat([e]);a.props.onSelectedCollaboratorsChange(n.filter(function(e){var t=e.id;return a.isIdSelected[t]})),a.setState({selectedCollaborators:n})},a.handleShowSocialConnectPanel=function(){a.setState({showSocialConnectPanel:!0})},a.handleTypeaheadSuggestionsChange=function(e){a.setState({typeaheadSuggestions:e})},a.isIdSelected={},r=n,d(a,r)}return m(t,e),t.prototype.render=function e(){var t=this;if(this.state.showSocialConnectPanel)return w.a.createElement(u,{onClose:this.handleCloseSocialConnectPanel,user:this.props.user});var n=this.state.value,a=(""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:"email-"+n,address:n,valid:Object(k.g)(n)}).concat(this.props.shareSuggestions).filter(h)).map(function(e,n){return r(e,t.isIdSelected[e.id],t.handleCollaboratorClick)}).concat(w.a.createElement(o,{message:""===n?I.a._("Choose from contacts"):I.a._("Find people you know"),onClick:this.handleShowSocialConnectPanel})).map(function(e,t){return w.a.createElement("li",{key:t},e)});return w.a.createElement(F.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},w.a.createElement(S.a,{onChange:this.handleTextFieldChange,placeholder:I.a._("Name or email"),value:n}),w.a.createElement("div",{className:"ContactsList Typeahead sendShare fullWidth flexible compact open"},w.a.createElement("ul",{className:"results"},a)))},t}(C.Component);G.defaultProps={shareSuggestions:[]};var q=Object(z.a)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(G),Y=n("IxI0"),X=n("ZtCB"),K=n.n(X),Z=n("g5tP"),Q=n("gEaE");t.b=y,t.c=E;var J="board_create",$=function(e){function t(){var n,a,r;g(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=a=v(this,e.call.apply(e,[this].concat(i))),a.state={selectedCollaborators:[]},a.handleSubmit=function(e){a.props.dispatch(Object(Z.a)(e))},a.handleSelectedCollaboratorsChange=function(e){a.setState({selectedCollaborators:e})},a.emptyBoardData={collab_board_email:!0,collaborator_invites_enabled:!0,id:"",is_collaborative:!1,name:"",description:"",category:"other",owner:{username:a.props.currentUser.username},pin_count:0},r=n,v(a,r)}return b(t,e),t.prototype.componentDidUpdate=function e(t){if(t.creating&&!this.props.creating&&!this.props.error){var n=this.props.newBoard;n&&(this.inviteSelectedColaborators(n.id),this.props.onBoardCreate(n))}},t.prototype.inviteSelectedColaborators=function e(t){var n=this.state.selectedCollaborators.filter(function(e){return"email"===e.type});n.length>=1&&y(t,n.map(function(e){return e.type}));var a=this.state.selectedCollaborators.filter(function(e){return e.type.startsWith("user")});a.length>=1&&E(t,a.map(function(e){return e.id}))},t.prototype.render=function e(){var t=this.props,n=t.privacy,a=f(t,["privacy"]),r=w.a.createElement("div",null,w.a.createElement(q,{onSelectedCollaboratorsChange:this.handleSelectedCollaboratorsChange,user:this.props.currentUser}));return w.a.createElement(Y.a,Object.assign({},a,{board:Object.assign({},this.emptyBoardData,{privacy:n}),boardCollaboratorsSection:r,currentUserIsOwner:!0,gaCategory:"board_create",isDeletable:!1,isEditable:!0,onSubmit:this.handleSubmit,submitText:I.a._("Create"),title:w.a.createElement(Q.l,{size:"xs"},I.a._("Create board"))}))},t}(C.Component),ee=function e(t){return t.boards&&t.boards.creating},te=t.a=Object(_.connect)(ee)($)},cD7N:function(e,t,n){"use strict";function a(){}var r=n("YlIK"),o=n("Cjb7"),i=n("ZtCB"),s=n.n(i),c=n("Svvu"),l=n("DLm7"),u=n("EAiy"),p=1e3,d=110;Object.assign(a.prototype,{handleConnect:function e(t,n,a){if(n&&!u.a.isLimitedLogin()){var r={success:function(e){var r={network:t,data:e};this._internalConnectNetwork(n,r,a)}.bind(this),error:function e(t){a.error&&a.error(t)},complete:function e(){a.complete&&a.complete()}};this._externalConnectNetwork(t,n,r)}else{var o={network:t};this._internalConnectNetwork(n,o,a)}},updateConnectStatus:function e(){s.a.create("UserResource",{user_id:u.a.get("id"),username:u.a.get("username"),field_set_key:"social_connect"}).callGet().then(function(e){var t=e.resource_response.data;u.a.set(t),o.a.instance.publish("currentUser","socialNetworkUpdated",t)})},_externalConnectNetwork:function e(t,n,a){n?c.default.instance().connect(t,a):a.success&&a.success({})},_internalConnectNetwork:function e(t,n,a){var r=this,o=s.a.create("UserSocialNetworkResource",n);(t?o.callCreate():o.callDelete()).then(function(e){r.updateConnectStatus(),a.success&&a.success(e)},function(e){a.error&&e instanceof Object&&a.error(e)}).fin(function(){a.complete&&a.complete()})},_getResourceNameForNetworkFriends:function e(t){var n=null;switch(t){case c.default.FACEBOOK:n="UserFacebookFriendsResource";break;case c.default.TWITTER:n="UserTwitterFriendsResource";break;case c.default.GOOGLE:n="UserGmailFriendsResource";break;case c.default.YAHOO:n="UserYahooFriendsResource";break;case c.default.MICROSOFT:n="UserMicrosoftFriendsResource";break;default:return}return n},_handleFriendsImported:function e(t,n,a){var r={resource:n,network:t,error:a};o.a.instance.publish("site","friendImportCompleted",r)},pollForFriends:function e(t,n){var a=this,r=(n=n||{}).resourceOptions||{},o=this._getResourceNameForNetworkFriends(t);if(o){var i=s.a.create(o,r);i.callGet({showError:!1}).then(function(){var e=n.success;e&&e(i),a._handleFriendsImported(t,i,null)},function(e){if(110===e.api_error_code)l.a.setTimeout(function(){a.pollForFriends(t,n)},1e3);else{var r=n.error;r&&r(),a._handleFriendsImported(t,i,e)}})}}});var m=null;a.instance=function(){return m||(m=new a),m},t.a=r.a.expose("SocialNetworkSettingsManager",a)},eXpm:function(e,t,n){var a=n("XpQc");"string"==typeof a&&(a=[[e.i,a,""]]);var r=n("IynO")(a,{});a.locals&&(e.exports=a.locals)},fvzG:function(e,t,n){"use strict";function a(e){return{type:"CONVERSATION_SHOW",payload:{id:e}}}function r(e){return{type:"CONVERSATION_HIDE",payload:{id:e}}}function o(e){return{type:"CONVERSATION_OPEN",payload:{id:e}}}function i(e){return{type:"CONVERSATION_CLOSE",payload:{id:e}}}function s(e){return{type:"CONVERSATION_CREATE",payload:e}}function c(e){return{type:"CONVERSATION_DELETE",payload:{id:e}}}function l(e,t){return{type:"MESSAGE_SEND_PENDING",payload:{id:e,message:t}}}function u(e,t,n){return{type:"MESSAGE_SEND_PENDING_CLEAR",payload:{id:e,messageId:t,newMessageId:n}}}function p(e,t){return function(n,a){var r=a(),o=m.a.create("ConversationMessagesResource",{conversation_id:e,text:t}),i=""+h;h+=1,o.callCreate().then(function(t){n(u(e,i,t.resource_response.data.id))}),n(l(e,{text:t,sender:r.viewer,created_at:(new Date).toString(),created_ms:Date.now(),id:i,board:null,event_type:null,pin:null,type:"message",user_did_it_data:null,user:null}))}}t.e=a,t.c=r,t.d=o,t.a=i,t.b=s,t.h=l,t.g=u,t.f=p;var d=n("ZtCB"),m=n.n(d),h=0},gEJd:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=n("mO/z"),d=n.n(p),m="undefined"!=typeof window&&window.performance?function(){return Math.floor(1e6*window.performance.now())}:function(){return 1e6*Date.now()},h=function e(t){var n=this;a(this,e),this.start=function(){return n.startTime=m(),n.startTime},this.end=function(){return n.endTime=m(),n.duration=n.startTime?n.endTime-n.startTime:null,n.duration},this.uuid=d()(),t&&Object.assign(this,t)},f=n("OVW8"),g=n.n(f),v=n("RklN"),b=n.n(v),y=function(e){function t(){var n,a,i;r(this,t);for(var s=arguments.length,c=Array(s),l=0;l<s;l++)c[l]=arguments[l];return n=a=o(this,e.call.apply(e,[this].concat(c))),a.observer=null,a.handleVisibilityChanged=function(e,t){a.props.onVisibilityChange(e,t)},i=n,o(a,i)}return i(t,e),t.prototype.componentDidMount=function e(){var t=b.a.findDOMNode(this);t instanceof HTMLElement&&(this.node=t),this.node&&(this.observer=new window.IntersectionObserver(this.handleVisibilityChanged,this.props.options),this.observer.observe(this.node))},t.prototype.componentWillUpdate=function e(t){},t.prototype.componentWillUnmount=function e(){null!==this.observer&&(this.observer.unobserve(this.node),delete this.observer)},t.prototype.render=function e(){return f.Children.only(this.props.children)},t}(f.Component),E=n("IaRT"),C=n.n(E),w=n("Akne"),_=function(e){function t(n,a){s(this,t);var r=c(this,e.call(this,n,a));return r.getChildContext=function(){var e=r.props,t=e.view,n=e.viewParameter,a=e.component,o=e.element,i=e.objectId;return{view:t||r.context.view,viewParameter:n||r.context.viewParameter,component:a||r.context.component,element:o,objectId:i||r.context.objectId,getParentUuid:function e(){return r.getUuid()}}},r.componentWillUnmount=function(){r.unregisterComponent()},r.getLoggerContext=function(){var e=r.getChildContext();return{view:e.view,viewParameter:e.viewParameter,component:e.component,element:e.element,objectId:e.objectId}},r.getParentId=function(){return r.context.getParentUuid?r.context.getParentUuid():void 0},r.getUuid=function(){if(r.state.timedPair)return r.state.timedPair.uuid},r.getTimedPair=function(){return r.state.timedPair},r.setTimedPair=function(e){r.setState({timedPair:e})},r.isRegistered=!1,r.registerComponent=function(){r.props.timeSpentManager.registerComponent(r),r.isRegistered=!0},r.unregisterComponent=function(){r.isRegistered&&(r.props.timeSpentManager.unregisterComponent(r),r.isRegistered=!1)},r.handleVisibilityChange=function(e){var t=e[0].intersectionRatio,n=e[0].intersectionRect,a=n.bottom,o=n.left,i=n.right,s=n.top;t>0?r.registerComponent():0===t&&(0===a&&0===o&&0===i&&0===s?r.unregisterComponent():r.registerComponent())},r.state={timedPair:new h(r.getLoggerContext())},r}return l(t,e),t.prototype.componentWillReceiveProps=function e(t){this.isRegistered&&(this.props.view===t.view&&this.props.viewParameter===t.viewParameter&&this.props.component===t.component&&this.props.element===t.element&&this.props.objectId===t.objectId&&Object(w.a)(this.props.auxData,t.auxData)&&Object(w.a)(this.props.viewData,t.viewData)||(this.unregisterComponent(),setTimeout(this.registerComponent)))},t.prototype.render=function e(){return g.a.createElement(y,{options:{threshold:0},onVisibilityChange:this.handleVisibilityChange},this.props.children)},t}(f.Component);_.contextTypes={view:C.a.number,viewParameter:C.a.number,component:C.a.number,element:C.a.number,objectId:C.a.string,getParentUuid:C.a.func},_.childContextTypes={view:C.a.number,viewParameter:C.a.number,component:C.a.number,element:C.a.number,objectId:C.a.string,getParentUuid:C.a.func};var I=_,S={ACTIVE:"ACTIVE",PAUSED:"PAUSED"},T=function e(){return window&&window.performance?"(Time: "+(window.performance.now()/1e3).toFixed(3)+"s)":""},O=function e(t){var n=!1;return function(){n||(n=!0,t.apply(void 0,arguments))}},N=function e(t){var n=t.flushEvents,a=t.shouldShowLogStatements,r=void 0!==a&&a,o=t.track,i=new Map,s=r?console:{error:function e(){},log:function e(){},group:function e(){},groupEnd:function e(){}};return console.group||(s.group=function(){var e;return(e=console).log.apply(e,arguments)},s.groupEnd=function(){}),new(function(){function e(){var t=this;u(this,e),this.appTimedPair=null,this.addEventListeners=function(){var e=void 0,n=void 0;void 0!==document.hidden?(e="hidden",n="visibilitychange"):void 0!==document.msHidden?(e="msHidden",n="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",n="webkitvisibilitychange");var a=function n(){document[e]?t.unregisterApp(!1):document.hasFocus()&&t.registerApp()};n&&document.addEventListener(n,a,!1),window.addEventListener("focus",t.registerApp),window.addEventListener("blur",function(){return t.unregisterApp(!1)}),window.addEventListener("beforeunload",t.handleLeave),window.addEventListener("pagehide",t.handleLeave)},this.handleLeave=O(function(){return t.unregisterApp(!0)}),this.registerApp=function(){s.group("App Foreground",T()),null==t.appTimedPair?(t.appTimedPair=new h,t.appTimedPair.start(),t._unpauseAllComponents(),null!==t.appTimedPair&&void 0!==t.appTimedPair&&o({event_type:4700,pair_id:t.appTimedPair.uuid})):s.error("TimedPair already exists for app."),s.groupEnd()},this.unregisterApp=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];s.group("App Background",T());var a=t.appTimedPair;if(null!==a&&void 0!==a){t._pauseAllComponents();var r=a.end();o({event_type:4701,duration_ns:r,pair_id:a.uuid}),t.appTimedPair=null}else s.error("No TimedPair found for app.");n(e),s.groupEnd()},this._activateComponent=function(e){s.group("Activating component",T()),r&&s.log(b.a.findDOMNode(e));var n=e.getTimedPair();if(n){n.start();var a=e.getLoggerContext(),i=a.component,c=a.element,l=a.objectId,u=a.view,p=a.viewParameter;o({event_type:4702,view_type:u,view_parameter:p,component:i,element:c,object_id_str:l,view_data:e.props.viewData,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._deactivateComponent=function(e){s.group("Deactivating component",T()),r&&s.log(b.a.findDOMNode(e));var n=e.getTimedPair();if(n){var a=n.view,i=n.viewParameter,c=n.component,l=n.element,u=n.objectId,p=n.end();o({event_type:4703,view_type:a,view_parameter:i,component:c,element:l,object_id_str:u,view_data:e.props.viewData,duration_ns:p,pair_id:n.uuid,aux_data:Object.assign({time_spent_foreground_pairid:t.appTimedPair&&t.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}s.groupEnd()},this._pauseAllComponents=function(){s.group("Pause all components"),i.forEach(function(e,n,a){e===S.ACTIVE&&t._deactivateComponent(n),a.set(n,S.PAUSED)}),s.groupEnd()},this._unpauseAllComponents=function(){s.group("Unpause all components"),i.forEach(function(e,t){t.setTimedPair(new h(t.getLoggerContext()))}),i.forEach(function(e,n){i.set(n,S.ACTIVE),t._activateComponent(n)}),s.groupEnd()}}return e.prototype.registerComponent=function e(t){null===this.appTimedPair?i.set(t,S.PAUSED):(i.set(t,S.ACTIVE),this._activateComponent(t))},e.prototype.unregisterComponent=function e(t){i.get(t)===S.ACTIVE&&(this._deactivateComponent(t),t.setTimedPair(new h(t.getLoggerContext()))),i.delete(t)},e.prototype.size=function e(){return i.size},e}())};n.d(t,"b",function(){return N}),n.d(t,!1,function(){return h}),n.d(t,"a",function(){return I})},"j1/O":function(e,t,n){"use strict";var a=n("hlP+"),r=n.n(a),o=n("g1tx"),i=n("ZtCB"),s=n.n(i),c=n("EAiy"),l=5,u=function e(t){t=t||{},this.tags=t.tags,this.enable_recent_queries=!!t.enable_recent_queries,this.minimum_term_character_length=t.minimum_term_character_length||0,this.bypass_lru_cache=t.bypass_lru_cache;var n={tags:t.tags,pin:t.pin_id},a=t.num_places;a?n.num_places=a:n.count="count"in t?t.count:5,t.should_geocode&&(n.should_geocode=!0),t.exclude_non_followers&&(n.exclude_non_followers=!0),t.field_set_key&&(n.field_set_key=t.field_set_key),t.pin_scope&&(n.pin_scope=t.pin_scope);var r="TypeaheadResource";t.resource_name&&(r=t.resource_name),this.searchResource=s.a.create(r,n),this.itemsCache=new o.a};Object.assign(u.prototype,r.a),Object.assign(u.prototype,{search:function e(t,n){var a=void 0;if(!t&&"pinners_and_contacts"===this.tags)return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&c.a.isLimitedLogin())return this.abortSearch(),this.publishData(t,[],{},n);if(!t&&this.enable_recent_queries&&c.a&&c.a.isAuthenticated())a="recent_search";else{var r=this.bypass_lru_cache?{}:this.itemsCache.get(t);if(r){var o=r.items;if(o&&o.length){this.abortSearch();var i=r.hint;return void this.publishData(t,o,i,n)}}}t.length>=this.minimum_term_character_length?this.fetch(t,a,n):this.publishData(t,[],{},n)},getResource:function e(){return this.searchResource},abortSearch:function e(){this.trigger("typeaheadSearchAbort"),this.getResource().abort()},publishData:function e(t,n,a,r){var o={term:t,items:n,hint:a};this.trigger("data",o),r&&r(o)},setAutocompleteScope:function e(t){this.getResource().set("autocompleteScope",t)},fetch:function e(t,n,a){var r=this,o=this.getResource();if(o.isCalling()){var i=o.get("term");if(t===i)return;this.abortSearch()}""!==this.tags&&(this.trigger("typeaheadSearchStart",t),o.set("term",t),o.set("tags",n||this.tags),o.resetBookmark(),o.callGet({showError:!1}).then(function(e){var n=e.resource_response.data,o=n.items,i=n.hint||{},s={hint:i,items:o};r.cacheData(t,s),r.publishData(t,o,i,a)},function(e){r.trigger("fetchError",e)}),this.warm=!0)},removeCacheForTerm:function e(t){this.itemsCache.remove(t)},cacheData:function e(t,n){this.itemsCache.set(t,n)},prefetch:function e(){this.warm||(s.a.create("TypeaheadPrepareResource").callGet({showError:!1}),this.warm=!0)}}),t.a=u},"mO/z":function(e,t,n){function a(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null);var i=(e=e||{}).random||(e.rng||r)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t)for(var s=0;s<16;++s)t[a+s]=i[s];return t||o(i)}var r=n("Y504"),o=n("yUpo");e.exports=a},nX0T:function(e,t,n){"use strict";var a=n("OVW8"),r=n.n(a),o=n("s149"),i=n("gEJd"),s=function e(t){return r.a.createElement(i.a,Object.assign({},t,{timeSpentManager:o.a}))};t.a=s},s149:function(e,t,n){"use strict";var a=n("hVsM"),r=n("SnoN"),o=n("FJZF"),i=n("gEJd"),s=o.a.getQueryStringParams()&&o.a.getQueryStringParams().debug_timespent,c=function e(t){var n=r.a.getInstance(),o=a.a.fromPlainObject(t);n.addEvent(o)},l=function e(t){r.a.getInstance().flushEvents(t)};t.a=Object(i.b)({flushEvents:l,shouldShowLogStatements:s,track:c})},sHx0:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("RklN"),l=n.n(c),u=n("Cjb7"),p=n("dCTv"),d=new Map,m=null,h=function e(t){t.forEach(function(e){var t=d.get(e.target);t&&t(e)})},f=function e(t,n,a){var r=n?{root:document.querySelector("#mainContainer"),rootMargin:"-64px 0px 0px 0px",threshold:[0,1]}:{threshold:[0,1]};m=m||new window.IntersectionObserver(h,r),d.set(t,a),m.observe(t)},g=function e(t){m.unobserve(t),d.delete(t)},v=function e(t){return d.has(t)},b=1e4,y=function e(t){var n=function(e){function n(){var t,o,i;a(this,n);for(var s=arguments.length,c=Array(s),p=0;p<s;p++)c[p]=arguments[p];return t=o=r(this,e.call.apply(e,[this].concat(c))),o.seen=!1,o.flushTimeout=null,o.attachDenzelNavigateListener=function(){o.denzelNavigateListener=u.a.instance.subscribe("site","navigateStarted",function(e,t,n,a){var r=new RegExp("/pin/[\\w|-]+/$");!a&&n&&"string"==typeof n.url&&r.test(n.url)&&o.leave()})},o.detachDenzelNavigateListener=function(){o.denzelNavigateListener&&(o.denzelNavigateListener.unsubscribe(),delete o.denzelNavigateListener)},o.enter=function(e){var t=e.intersectionRatio>0;o.seen=!o.props.newViewportLogic||t,o.seen&&(o.props.onVisibilityChanged(1,e),o.props.newViewportLogic&&(o.flushTimeout=setTimeout(o.leave,b))),o.props.trackFullVisible||o.props.newViewportLogic||(o.attachDenzelNavigateListener(),o.flushTimeout=setTimeout(o.leave,b))},o.leave=function(e){var t=o._node;t&&v(t)&&(o.props.trackFullVisible||o.props.newViewportLogic||(g(t),o.detachDenzelNavigateListener(),clearTimeout(o.flushTimeout)),o.seen&&(o.props.newViewportLogic&&clearTimeout(o.flushTimeout),o.props.trackFullVisible&&(o.seen=!1),o.props.onVisibilityChanged(0,e||{boundingClientRect:t.getBoundingClientRect()})),o.props.newViewportLogic&&(o.seen=!1))},o.observe=function(){try{o._node=l.a.findDOMNode(o)}catch(e){return}if(o._node){var e=o._node;f(e,o.props.newViewportLogic,function(t){if(d.has(e)){var n=o.props.trackFullVisible?t.intersectionRatio>=1:t.intersectionRatio>0,a=o.props.trackFullVisible?0===t.intersectionRatio:!n;!o.seen&&n?o.enter(t):o.seen&&a&&o.leave(t)}})}},i=t,r(o,i)}return o(n,e),n.prototype.componentDidMount=function e(){this.observe()},n.prototype.componentWillUnmount=function e(){if(!this.props.newViewportLogic&&(this.leave(),this.props.trackFullVisible)){var t=this._node;if(!t||!v(t))return;g(t)}},n.prototype.render=function e(){return s.a.createElement(t,this.props)},n}(i.Component);return Object(p.a)(function(e,t){return{newViewportLogic:"enabled_viewport"===t.v2ActivateExperiment("web_pin_impressions")}})(n)};t.a=y},skut:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n("OVW8"),s=n.n(i),c=n("IaRT"),l=n.n(c),u=n("j1/O"),p=function(e){function t(n,o){a(this,t);var i=r(this,e.call(this,n,o));return i.searchCache=Object.create(null),i.lastSearchedQuery=null,i.search=function(e){i.lastSearchedQuery=e,e in i.searchCache?i.props.onTypeaheadSuggestionsChange(i.searchCache[e],e):i.provider.search(e,function(t){var n=t.items;i.searchCache[e]=n,e===i.lastSearchedQuery&&i.props.onTypeaheadSuggestionsChange(n,e)})},i.props.shouldCacheEmptyQuery&&(i.searchCache[""]=null),i}return o(t,e),t.prototype.componentDidMount=function e(){var t=this.props.resourceOptions||{};this.provider=new u.a(Object.assign({resource_name:this.props.resourceName},t));var n=this.props.value;void 0!==n&&null!==n&&this.props.allowSearchOnMount&&this.search(this.props.value)},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;void 0!==n&&null!==n&&n!==this.props.value&&this.search(n)},t.prototype.render=function e(){return s.a.createElement("div",{className:this.props.className},this.props.children)},t}(i.Component);p.defaultProps={resourceName:"TypeaheadResource",shouldCacheEmptyQuery:!1},t.a=p},tZWC:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n("OVW8"),u=n.n(l),p=n("DUIN"),d=n("GGB8"),m=n.n(d),h=n("PrM5"),f=n("W/Cr"),g=n("XSNT"),v=n("IaRT"),b=n.n(v),y=n("z/23"),E=n("9bGG"),C=function(e){function t(){return a(this,t),r(this,e.apply(this,arguments))}return o(t,e),t.prototype.componentWillReceiveProps=function e(t){!this.props.isHovering&&t.isHovering?this.props.onHoverStart():this.props.isHovering&&!t.isHovering&&this.props.onHoverEnd()},t.prototype.render=function e(){var t=this.props,n=t.is_pinner?f.a._("On Pinterest"):t.email?t.email:"facebook_non_pinner"===t.type?f.a._("Facebook"):"gplus_non_pinner"===t.type?f.a._("Google"):f.a._("Enter an email address");return u.a.createElement("a",Object.assign({},this.props.hoverHandlers,{onClick:this.props.onClick,role:"button"}),t.send_pin_image?u.a.createElement("span",{className:"typeaheadImg"},u.a.createElement("img",{alt:"",src:t.send_pin_image})):null,u.a.createElement("p",{className:m()("typeaheadName",{hasImage:t.send_pin_image})},t.label),u.a.createElement("div",{className:"titleWrapper"},u.a.createElement("i",{className:m()("titleIcon",{isPinner:t.is_pinner},{isFacebook:"facebook_non_pinner"===t.type},{isGplus:"gplus_non_pinner"===t.type})}),u.a.createElement("p",{className:"title"},n)))},t}(l.Component),w=Object(E.a)(C),_=n("NfjA"),I=n("Svvu"),S=n("skut"),T=n("Kqaz"),O=n("Cjb7"),N=n("5tOk"),x=n("aoZs"),k=[I.default.FACEBOOK,I.default.TWITTER,I.default.GPLUS,I.default.YAHOO],P=u.a.createElement("div",{className:"footer white"}),j=function(e){function t(){var n,a,r;i(this,t);for(var o=arguments.length,c=Array(o),l=0;l<o;l++)c[l]=arguments[l];return n=a=s(this,e.call.apply(e,[this].concat(c))),a.state={networks:Object(h.e)(a.props.viewer),open:!1,typeaheadSuggestions:[]},a.onUserInviteClick=function(e){var t=e.id,n=a.props,r=n.boardId,o=n.onInviteItemClick;r?o(Object(x.c)(r,[t])):o(!0,e)},a.handleBodyClick=function(e){a._results.contains(e.target)||a.setState({open:!1})},a.handleTypeaheadSuggestionsChange=function(e){var t=a.props.viewer;a.setState({typeaheadSuggestions:(e||[]).filter(function(e){return e.id!==t.id})})},a.handleOnEmailInviteClick=function(){var e=a.props,t=e.boardId,n=e.onInviteItemClick,r=e.value;t?n(Object(x.b)(t,[r])):n(!1,r)},a.subscriber=O.b.subscribe("currentUser","socialNetworkUpdated",function(e,t,n){a.setState({networks:Object(h.e)(n)})}),a.logTypeaheadInput=function(e){(0,a.props.contextLog)(4113,{component:13029,element:1043,entered_query:e})},a.logSearchContactItemClick=function(e){var t=a.props;(0,t.contextLog)(101,{component:13029,element:1044,entered_query:t.value,result_index:e})},a.renderResultItems=function(){var e=a.props.changeOnTextHover,t=m()("Typeahead","userSelect",{open:a.state.open}),n=a.state.typeaheadSuggestions.map(function(t,n){return u.a.createElement(w,Object.assign({currentUser:a.props.currentUser,key:n,onClick:function e(){a.onUserInviteClick(t),a.logSearchContactItemClick(n)},onHoverEnd:function t(){return e?a.restoreTextFieldValue():null},onHoverStart:function n(){return e?a.forceTextFieldValue(t.label):null}},t))}).concat(a.getStaticItems()).map(function(e,t){return u.a.createElement("li",{key:t},e)});return u.a.createElement("div",{className:t,ref:function e(t){a._results=t},style:{zIndex:1e3}},u.a.createElement("ul",null,n),a.props.inBoardCollaboratorInviter?P:null)},r=n,s(a,r)}return c(t,e),t.prototype.componentDidMount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.addEventListener(e,t.handleBodyClick)})},t.prototype.componentWillReceiveProps=function e(t){var n=t.value;this.setState({open:n.length>0})},t.prototype.componentWillUnmount=function e(){var t=this;["mousedown","touchstart"].forEach(function(e){document.removeEventListener(e,t.handleBodyClick)}),this.subscriber.unsubscribe()},t.prototype.getStaticItems=function e(){return[].concat(this.getEmailItems(),this.getSocialItems(this.state.networks))},t.prototype.getEmailItems=function e(){var t=this.props.value;return[u.a.createElement(y.a,{email:t,isValid:Object(N.g)(t),key:"send-to-email-component",onClick:this.handleOnEmailInviteClick,showSendEmailText:!1})]},t.prototype.getSocialItems=function e(t){return Object.keys(t).filter(function(e){return k.includes(e)}).filter(function(e){return!1===t[e].connected}).map(function(e,t){return u.a.createElement(_.a,{key:"socialConnect-"+e,network:e})})},t.prototype.forceTextFieldValue=function e(t){this.previousValue=this.props.value,this.props.onChange(t)},t.prototype.restoreTextFieldValue=function e(){this.props.onChange(this.previousValue),delete this.previousValue},t.prototype.render=function e(){var t=this,n=this.props,a=n.boardId,r=n.className,o=n.inBoardCollaboratorInviter,i=n.onChange,s=n.onKeyDown,c=n.showInputPlaceholder,l=n.value,p=m()("Input","field",{reactCollaboratorInviterTypeaheadCustom:o},{collaboratorInviterTypeahead:!o}),d=a?{board:a}:null;return u.a.createElement(S.a,{className:m()(r,"reactSocialTypeahead"),onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",resourceOptions:d,value:l},u.a.createElement("div",null,u.a.createElement("div",{className:"TypeaheadField userSelect inputContainer"},u.a.createElement(g.a,{className:p,id:"collaboratorInviterTypeahead",onChange:function e(n){i(n),t.logTypeaheadInput(n)},onKeyDown:s,placeholder:c?f.a._("Name or email","search"):null,value:l,focused:!0})),this.renderResultItems()))},t}(l.Component);j.defaultProps={changeOnTextHover:!1,onKeyDown:function e(){},showInputPlaceholder:!0};var R=function e(t){return{viewer:t.viewer}},D=t.a=Object(T.a)(Object(p.connect)(R)(j))},yUpo:function(e,t){function n(e,t){var n=t||0,r=a;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}for(var a=[],r=0;r<256;++r)a[r]=(r+256).toString(16).substr(1);e.exports=n},"z/23":function(e,t,n){"use strict";function a(e){var t=e.email,n=e.isValid,a=e.onClick,r=e.showSendEmailText,i=n?o.a.createElement("div",{className:"icon"},t[0].toUpperCase()):o.a.createElement("div",{className:s()("icon","typingEmail")},d),l=n?c.a._("Click to send!"):c.a._("Keep typing!"),u=r?Object(p.h)(c.a._("Email {{ email }}"),{email:t}):Object(p.h)(c.a._("Invite {{ email }}"),{email:t});return o.a.createElement("div",{className:s()("sendToEmail",{unclickable:!n})},o.a.createElement("a",{className:"selectableEmailItem",onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){n&&a()}),role:"button"},o.a.createElement("div",{className:"left"},i),o.a.createElement("div",{className:"right"},o.a.createElement("h4",{className:"title"},u),o.a.createElement("p",{className:"subtitle"},l))))}t.a=a;var r=n("OVW8"),o=n.n(r),i=n("GGB8"),s=n.n(i),c=n("W/Cr"),l=n("IaRT"),u=n.n(l),p=n("5tOk"),d=o.a.createElement("em",null)}});